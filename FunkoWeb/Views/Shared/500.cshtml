@model FunkoWeb.Models.ErrorResponse

@{
    ViewData["Title"] = "Error del Servidor";
}

<div class="container">
    <div class="row justify-content-center align-items-center" style="min-height: 70vh;">
        <div class="col-lg-8 text-center">
            <div class="error-container" style="animation: fadeIn 0.5s ease-in;">
                <!-- CÃ³digo de error con gradiente -->
                <h1 class="display-1 fw-bold mb-4" style="
                    font-size: 8rem;
                    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    text-shadow: 0 4px 20px rgba(245, 87, 108, 0.3); ">
                    500
                </h1>

                <div class="mb-4">
                    <span style="font-size: 4rem;">ðŸ”§</span>
                </div>
                
                <h2 class="mb-3" style="font-weight: 600; color: #333;">
                    Â¡Algo saliÃ³ mal en nuestro servidor!
                </h2>
                
                <p class="lead text-muted mb-4" style="max-width: 600px; margin: 0 auto;">
                    Lo sentimos, hemos experimentado un error interno. Nuestro equipo de Funkos estÃ¡ trabajando para solucionarlo.
                </p>

                <!-- InformaciÃ³n adicional -->
                <div class="alert alert-light border shadow-sm mb-4" style="max-width: 500px; margin: 0 auto; border-radius: 15px;">
                    <p class="mb-2">
                        <i class="bi bi-info-circle"></i> <strong>Â¿QuÃ© puedes hacer?</strong>
                    </p>
                    <ul class="list-unstyled mb-0 text-start" style="font-size: 0.9rem;">
                        <li class="mb-2">âœ“ Intenta recargar la pÃ¡gina</li>
                        <li class="mb-2">âœ“ Vuelve al inicio y prueba de nuevo</li>
                        <li>âœ“ Si el problema persiste, contacta al administrador</li>
                    </ul>
                </div>
                
                @if (Model.ShowRequestId)
                {
                    <div class="alert alert-secondary border shadow-sm mb-4" style="max-width: 500px; margin: 0 auto; border-radius: 15px; font-size: 0.85rem;">
                        <p class="mb-1"><strong>ID de Solicitud:</strong> <code>@Model.RequestId</code></p>
                        <p class="mb-0"><strong>Hora:</strong> @Model.Timestamp.ToLocalTime().ToString("dd/MM/yyyy HH:mm:ss")</p>
                    </div>
                }
                
                @* Development only: Show detailed error information *@
                @if (Model.Details != null)
                {
                    <div class="alert alert-warning border shadow-sm mb-4 text-start" style="max-width: 800px; margin: 0 auto; border-radius: 15px; font-size: 0.85rem;">
                        <h5><i class="bi bi-bug"></i> InformaciÃ³n de Desarrollo</h5>
                        <hr/>
                        <p><strong>Tipo de ExcepciÃ³n:</strong> @Model.Details.ExceptionType</p>
                        @if (!string.IsNullOrEmpty(Model.Details.InnerException))
                        {
                            <p><strong>ExcepciÃ³n Interna:</strong> @Model.Details.InnerException</p>
                        }
                        @if (!string.IsNullOrEmpty(Model.Details.StackTrace))
                        {
                            <p><strong>Stack Trace:</strong></p>
                            <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto; font-size: 0.75rem;">@Model.Details.StackTrace</pre>
                        }
                    </div>
                }

                <!-- Botones de acciÃ³n -->
                <div class="d-flex gap-3 justify-content-center mt-4">
                    <a asp-controller="Home" asp-action="Index" class="btn btn-primary px-5 py-3" style="
                        border-radius: 12px;
                        font-weight: 600;
                        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        border: none;
                        transition: transform 0.2s, box-shadow 0.2s;
                    " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.5)'" 
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)'">
                        <i class="bi bi-house-door"></i> Volver al Inicio
                    </a>
                    
                    <button onclick="window.location.reload()" class="btn btn-outline-secondary px-5 py-3" style="
                        border-radius: 12px;
                        font-weight: 600;
                        transition: all 0.2s;
                    ">
                        <i class="bi bi-arrow-clockwise"></i> Recargar PÃ¡gina
                    </button>
                </div>

                <!-- DecoraciÃ³n con animaciÃ³n -->
                <div class="mt-5" style="opacity: 0.3; animation: float 3s ease-in-out infinite;">
                    <svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="40" fill="none" stroke="url(#gradient)" stroke-width="4"/>
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @@keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-20px);
        }
    }
</style>
